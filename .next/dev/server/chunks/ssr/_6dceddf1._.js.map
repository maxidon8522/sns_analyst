{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/components/forms/analysis-tags-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalysisTagsForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalysisTagsForm() from the server but AnalysisTagsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx <module evaluation>\",\n    \"AnalysisTagsForm\",\n);\nexport const analysisTagSections = registerClientReference(\n    function() { throw new Error(\"Attempted to call analysisTagSections() from the server but analysisTagSections is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx <module evaluation>\",\n    \"analysisTagSections\",\n);\nexport const analysisTagsSchema = registerClientReference(\n    function() { throw new Error(\"Attempted to call analysisTagsSchema() from the server but analysisTagsSchema is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx <module evaluation>\",\n    \"analysisTagsSchema\",\n);\nexport const defaultAnalysisTagsFormValues = registerClientReference(\n    function() { throw new Error(\"Attempted to call defaultAnalysisTagsFormValues() from the server but defaultAnalysisTagsFormValues is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx <module evaluation>\",\n    \"defaultAnalysisTagsFormValues\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,yEACA;AAEG,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,yEACA;AAEG,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,yEACA;AAEG,MAAM,gCAAgC,IAAA,wQAAuB,EAChE;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,yEACA","ignoreList":[0]}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/components/forms/analysis-tags-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalysisTagsForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalysisTagsForm() from the server but AnalysisTagsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx\",\n    \"AnalysisTagsForm\",\n);\nexport const analysisTagSections = registerClientReference(\n    function() { throw new Error(\"Attempted to call analysisTagSections() from the server but analysisTagSections is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx\",\n    \"analysisTagSections\",\n);\nexport const analysisTagsSchema = registerClientReference(\n    function() { throw new Error(\"Attempted to call analysisTagsSchema() from the server but analysisTagsSchema is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx\",\n    \"analysisTagsSchema\",\n);\nexport const defaultAnalysisTagsFormValues = registerClientReference(\n    function() { throw new Error(\"Attempted to call defaultAnalysisTagsFormValues() from the server but defaultAnalysisTagsFormValues is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/forms/analysis-tags-form.tsx\",\n    \"defaultAnalysisTagsFormValues\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,qDACA;AAEG,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,qDACA;AAEG,MAAM,qBAAqB,IAAA,wQAAuB,EACrD;IAAa,MAAM,IAAI,MAAM;AAAoP,GACjR,qDACA;AAEG,MAAM,gCAAgC,IAAA,wQAAuB,EAChE;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,qDACA","ignoreList":[0]}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/lib/instagram.ts"],"sourcesContent":["import { cache } from 'react';\n\nconst ACCESS_TOKEN = process.env.INSTAGRAM_ACCESS_TOKEN;\nconst USER_ID = process.env.INSTAGRAM_USER_ID;\nconst API_VERSION = 'v19.0';\nconst BASE_URL = `https://graph.facebook.com/${API_VERSION}`;\n\nexport interface InstagramMedia {\n  id: string;\n  caption: string;\n  media_type: string;\n  permalink: string;\n  timestamp: string;\n  like_count: number;\n  comments_count: number;\n  media_url?: string;\n  thumbnail_url?: string;\n  insights?: {\n    views: number;\n    reach: number;\n    saved: number;\n  };\n}\n\nexport const getInstagramPosts = async (): Promise<InstagramMedia[]> => {\n  if (!ACCESS_TOKEN || !USER_ID) {\n    console.error('❌ API Key missing');\n    return [];\n  }\n\n  const fields =\n    'id,caption,media_type,timestamp,like_count,comments_count,permalink';\n  const url = `${BASE_URL}/${USER_ID}/media?fields=${fields}&access_token=${ACCESS_TOKEN}&limit=20`;\n\n  console.log('Fetching URL:', url);\n\n  try {\n    const res = await fetch(url, { cache: 'no-store' });\n\n    if (!res.ok) {\n      const errorData = await res.json();\n      console.error('❌ Instagram API Error:', errorData);\n      return [];\n    }\n\n    const data = await res.json();\n    console.log('✅ Posts fetched:', data.data?.length || 0);\n    return data.data || [];\n  } catch (error) {\n    console.error('❌ Fetch Error:', error);\n    return [];\n  }\n};\n\nexport async function getMediaInsights(mediaId: string) {\n  if (!ACCESS_TOKEN) return null;\n\n  const metrics = 'views,reach,saved';\n  const url = `${BASE_URL}/${mediaId}/insights?metric=${metrics}&access_token=${ACCESS_TOKEN}`;\n\n  try {\n    const res = await fetch(url, { cache: 'no-store' });\n    if (!res.ok) return null;\n\n    const json = await res.json();\n    const data = json.data;\n\n    const results: Record<string, number> = {};\n    if (Array.isArray(data)) {\n      for (const item of data) {\n        if (item.values && item.values.length > 0) {\n          results[item.name] = item.values[0].value;\n        }\n      }\n    }\n\n    return {\n      views: results['views'] || 0,\n      reach: results['reach'] || 0,\n      saved: results['saved'] || 0,\n    };\n  } catch (error) {\n    return null;\n  }\n}\n\nexport const getPostWithInsights = async (\n  mediaId: string,\n): Promise<InstagramMedia | null> => {\n  if (!ACCESS_TOKEN) return null;\n\n  const fields =\n    'id,caption,media_type,timestamp,like_count,comments_count,permalink';\n  const url = `${BASE_URL}/${mediaId}?fields=${fields}&access_token=${ACCESS_TOKEN}`;\n\n  try {\n    const res = await fetch(url, { cache: 'no-store' });\n    if (!res.ok) return null;\n\n    const post = await res.json();\n    const insights = await getMediaInsights(mediaId);\n\n    return {\n      ...post,\n      insights: insights || { views: 0, reach: 0, saved: 0 },\n    };\n  } catch (error) {\n    return null;\n  }\n};\n"],"names":[],"mappings":";;;;;;;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,sBAAsB;AACvD,MAAM,UAAU,QAAQ,GAAG,CAAC,iBAAiB;AAC7C,MAAM,cAAc;AACpB,MAAM,WAAW,CAAC,2BAA2B,EAAE,aAAa;AAmBrD,MAAM,oBAAoB;IAC/B,IAAI,CAAC,gBAAgB,CAAC,SAAS;QAC7B,QAAQ,KAAK,CAAC;QACd,OAAO,EAAE;IACX;IAEA,MAAM,SACJ;IACF,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,QAAQ,cAAc,EAAE,OAAO,cAAc,EAAE,aAAa,SAAS,CAAC;IAEjG,QAAQ,GAAG,CAAC,iBAAiB;IAE7B,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,KAAK;YAAE,OAAO;QAAW;QAEjD,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,YAAY,MAAM,IAAI,IAAI;YAChC,QAAQ,KAAK,CAAC,0BAA0B;YACxC,OAAO,EAAE;QACX;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC,oBAAoB,KAAK,IAAI,EAAE,UAAU;QACrD,OAAO,KAAK,IAAI,IAAI,EAAE;IACxB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,EAAE;IACX;AACF;AAEO,eAAe,iBAAiB,OAAe;IACpD,IAAI,CAAC,cAAc,OAAO;IAE1B,MAAM,UAAU;IAChB,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,QAAQ,iBAAiB,EAAE,QAAQ,cAAc,EAAE,cAAc;IAE5F,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,KAAK;YAAE,OAAO;QAAW;QACjD,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QAEpB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,OAAO,KAAK,IAAI;QAEtB,MAAM,UAAkC,CAAC;QACzC,IAAI,MAAM,OAAO,CAAC,OAAO;YACvB,KAAK,MAAM,QAAQ,KAAM;gBACvB,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,CAAC,MAAM,GAAG,GAAG;oBACzC,OAAO,CAAC,KAAK,IAAI,CAAC,GAAG,KAAK,MAAM,CAAC,EAAE,CAAC,KAAK;gBAC3C;YACF;QACF;QAEA,OAAO;YACL,OAAO,OAAO,CAAC,QAAQ,IAAI;YAC3B,OAAO,OAAO,CAAC,QAAQ,IAAI;YAC3B,OAAO,OAAO,CAAC,QAAQ,IAAI;QAC7B;IACF,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,MAAM,sBAAsB,OACjC;IAEA,IAAI,CAAC,cAAc,OAAO;IAE1B,MAAM,SACJ;IACF,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,QAAQ,QAAQ,EAAE,OAAO,cAAc,EAAE,cAAc;IAElF,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,KAAK;YAAE,OAAO;QAAW;QACjD,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QAEpB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,WAAW,MAAM,iBAAiB;QAExC,OAAO;YACL,GAAG,IAAI;YACP,UAAU,YAAY;gBAAE,OAAO;gBAAG,OAAO;gBAAG,OAAO;YAAE;QACvD;IACF,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/utils/supabase/config.ts"],"sourcesContent":["import {\n  createClient,\n  type SupabaseClient,\n  type SupabaseClientOptions,\n} from '@supabase/supabase-js';\n\nimport type { Database } from '../../types/database';\n\ntype ClientOptions = SupabaseClientOptions<Database>;\n\nconst getEnvValue = (key: string): string => {\n  const value = process.env[key];\n  if (!value) {\n    throw new Error(`Missing required environment variable: ${key}`);\n  }\n\n  return value;\n};\n\nexport const getSupabaseUrl = (): string =>\n  getEnvValue('NEXT_PUBLIC_SUPABASE_URL');\n\nexport const getSupabaseAnonKey = (): string =>\n  getEnvValue('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n\nexport const getSupabaseServiceRoleKey = (): string =>\n  getEnvValue('SUPABASE_SERVICE_ROLE_KEY');\n\nconst baseOptions: ClientOptions = {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n  },\n  global: {\n    headers: {\n      'X-Client-Info': 'sns-analyst',\n    },\n  },\n};\n\nexport const createSupabaseClientWithConfig = (\n  key: string,\n  options?: ClientOptions,\n): SupabaseClient<Database> =>\n  createClient<Database>(\n    getSupabaseUrl(),\n    key,\n    mergeClientOptions(baseOptions, options),\n  );\n\nconst mergeClientOptions = (\n  base: ClientOptions,\n  overrides?: ClientOptions,\n): ClientOptions => {\n  const clonedBase: ClientOptions = {\n    ...base,\n    auth: base.auth ? { ...base.auth } : undefined,\n    global: base.global\n      ? {\n          ...base.global,\n          headers: base.global.headers\n            ? { ...base.global.headers }\n            : undefined,\n        }\n      : undefined,\n  };\n\n  if (!overrides) {\n    return clonedBase;\n  }\n\n  return {\n    ...clonedBase,\n    ...overrides,\n    auth: {\n      ...(clonedBase.auth ?? {}),\n      ...(overrides.auth ?? {}),\n    },\n    global: {\n      ...(clonedBase.global ?? {}),\n      ...(overrides.global ?? {}),\n      headers: {\n        ...(clonedBase.global?.headers ?? {}),\n        ...(overrides.global?.headers ?? {}),\n      },\n    },\n  };\n};\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAUA,MAAM,cAAc,CAAC;IACnB,MAAM,QAAQ,QAAQ,GAAG,CAAC,IAAI;IAC9B,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM,CAAC,uCAAuC,EAAE,KAAK;IACjE;IAEA,OAAO;AACT;AAEO,MAAM,iBAAiB,IAC5B,YAAY;AAEP,MAAM,qBAAqB,IAChC,YAAY;AAEP,MAAM,4BAA4B,IACvC,YAAY;AAEd,MAAM,cAA6B;IACjC,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;IACtB;IACA,QAAQ;QACN,SAAS;YACP,iBAAiB;QACnB;IACF;AACF;AAEO,MAAM,iCAAiC,CAC5C,KACA,UAEA,IAAA,uLAAY,EACV,kBACA,KACA,mBAAmB,aAAa;AAGpC,MAAM,qBAAqB,CACzB,MACA;IAEA,MAAM,aAA4B;QAChC,GAAG,IAAI;QACP,MAAM,KAAK,IAAI,GAAG;YAAE,GAAG,KAAK,IAAI;QAAC,IAAI;QACrC,QAAQ,KAAK,MAAM,GACf;YACE,GAAG,KAAK,MAAM;YACd,SAAS,KAAK,MAAM,CAAC,OAAO,GACxB;gBAAE,GAAG,KAAK,MAAM,CAAC,OAAO;YAAC,IACzB;QACN,IACA;IACN;IAEA,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,OAAO;QACL,GAAG,UAAU;QACb,GAAG,SAAS;QACZ,MAAM;YACJ,GAAI,WAAW,IAAI,IAAI,CAAC,CAAC;YACzB,GAAI,UAAU,IAAI,IAAI,CAAC,CAAC;QAC1B;QACA,QAAQ;YACN,GAAI,WAAW,MAAM,IAAI,CAAC,CAAC;YAC3B,GAAI,UAAU,MAAM,IAAI,CAAC,CAAC;YAC1B,SAAS;gBACP,GAAI,WAAW,MAAM,EAAE,WAAW,CAAC,CAAC;gBACpC,GAAI,UAAU,MAAM,EAAE,WAAW,CAAC,CAAC;YACrC;QACF;IACF;AACF"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/utils/supabase/server.ts"],"sourcesContent":["import type { SupabaseClient } from '@supabase/supabase-js';\n\nimport type { Database } from '../../types/database';\nimport {\n  createSupabaseClientWithConfig,\n  getSupabaseServiceRoleKey,\n} from './config';\n\nexport type ServerSupabaseClient = SupabaseClient<Database>;\n\nexport const createServerSupabaseClient = (): ServerSupabaseClient =>\n  createSupabaseClientWithConfig(getSupabaseServiceRoleKey(), {\n    auth: {\n      persistSession: false,\n      autoRefreshToken: false,\n      detectSessionInUrl: false,\n    },\n  });\n"],"names":[],"mappings":";;;;AAGA;;AAOO,MAAM,6BAA6B,IACxC,IAAA,6JAA8B,EAAC,IAAA,wJAAyB,KAAI;QAC1D,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,oBAAoB;QACtB;IACF"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/app/videos/new/page.tsx"],"sourcesContent":["import { redirect } from 'next/navigation';\nimport { revalidatePath } from 'next/cache';\n\nimport {\n  AnalysisTagsForm,\n  defaultAnalysisTagsFormValues,\n  type AnalysisTagsFormValues,\n} from '@/components/forms/analysis-tags-form';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\n\nimport { fetchInstagramMediaById } from '@/lib/instagram';\nimport { createServerSupabaseClient } from '@/utils/supabase/server';\nimport type { AnalysisTags } from '@/types/database';\n\ntype NewVideoPageProps = {\n  searchParams?: {\n    ig_media_id?: string;\n  };\n};\n\nexport default async function NewVideoPage({\n  searchParams,\n}: NewVideoPageProps) {\n  const mediaId = searchParams?.ig_media_id;\n\n  if (!mediaId) {\n    return (\n      <div className=\"space-y-4\">\n        <h1 className=\"text-2xl font-semibold\">動画を選択してください</h1>\n        <p className=\"text-muted-foreground\">\n          Instagram投稿ページからタグ付けしたい動画を選択してください。\n        </p>\n      </div>\n    );\n  }\n\n  let media: Awaited<ReturnType<typeof fetchInstagramMediaById>>;\n  try {\n    media = await fetchInstagramMediaById(mediaId);\n  } catch (error) {\n    const message =\n      error instanceof Error\n        ? error.message\n        : 'Instagram投稿の取得に失敗しました。';\n    return (\n      <div className=\"space-y-4\">\n        <h1 className=\"text-2xl font-semibold\">投稿の取得に失敗しました</h1>\n        <p className=\"text-muted-foreground\">{message}</p>\n        <Button asChild>\n          <a href=\"/instagram\">Instagram投稿一覧に戻る</a>\n        </Button>\n      </div>\n    );\n  }\n\n  const saveVideo = async (values: AnalysisTagsFormValues) => {\n    'use server';\n\n    const { self_score, ...analysisTags } = values;\n    const tags = analysisTags as AnalysisTags;\n\n    const supabase = createServerSupabaseClient();\n    const { error } = await supabase.from('videos').insert({\n      ig_media_id: media.id,\n      permalink: media.permalink ?? null,\n      thumbnail_url: media.thumbnail_url ?? media.media_url ?? null,\n      caption: media.caption ?? null,\n      posted_at: media.timestamp ?? null,\n      analysis_tags: tags,\n      self_score,\n    });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    revalidatePath('/instagram');\n    redirect('/instagram?created=1');\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <header className=\"space-y-2\">\n        <h1 className=\"text-2xl font-bold\">動画にタグ付け</h1>\n        <p className=\"text-sm text-muted-foreground\">\n          Instagramから取得した動画情報を確認して、分析タグを入力してください。\n        </p>\n      </header>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex flex-wrap items-center gap-2 text-base\">\n            <Badge variant=\"secondary\">{media.media_type}</Badge>\n            <span className=\"font-semibold\">\n              {media.caption ?? 'キャプション未設定'}\n            </span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          {media.thumbnail_url || media.media_url ? (\n            <div className=\"overflow-hidden rounded-lg border\">\n              <img\n                src={media.thumbnail_url ?? media.media_url ?? ''}\n                alt={media.caption ?? 'Instagram thumbnail'}\n                className=\"aspect-video w-full object-cover\"\n                loading=\"lazy\"\n              />\n            </div>\n          ) : null}\n          <div className=\"flex flex-col gap-1 text-sm text-muted-foreground\">\n            <p>\n              Media ID: <span className=\"font-mono\">{media.id}</span>\n            </p>\n            {media.permalink ? (\n              <Button variant=\"link\" className=\"px-0\" asChild>\n                <a\n                  href={media.permalink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Instagramで開く\n                </a>\n              </Button>\n            ) : null}\n          </div>\n        </CardContent>\n      </Card>\n\n      <AnalysisTagsForm\n        defaultValues={defaultAnalysisTagsFormValues}\n        onSubmit={saveVideo}\n        submitLabel=\"Supabaseに保存する\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;AACA;AAEA;AAKA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;MA4CoB,uCAAZ,kCAAmB;;IAGvB,MAAM,EAAE,UAAU,EAAE,GAAG,cAAc,GAAG;IACxC,MAAM,OAAO;IAEb,MAAM,WAAW,IAAA,yJAA0B;IAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,MAAM,CAAC;QACrD,WAAW;QACX,WAAW,kBAAmB;QAC9B,eAAe,oCAA0C;QACzD,SAAS,kBAAiB;QAC1B,WAAW,kBAAmB;QAC9B,eAAe;QACf;IACF;IAEA,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,iMAAQ,EAAC;AACX;AAvBkB,+OAAA;AAnCL,eAAe,aAAa,EACzC,YAAY,EACM;IAClB,MAAM,UAAU,cAAc;IAE9B,IAAI,CAAC,SAAS;QACZ,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAK3C;IAEA,IAAI;IACJ,IAAI;QACF,QAAQ,MAAM,IAAA,2IAAuB,EAAC;IACxC,EAAE,OAAO,OAAO;QACd,MAAM,UACJ,iBAAiB,QACb,MAAM,OAAO,GACb;QACN,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,8OAAC;oBAAE,WAAU;8BAAyB;;;;;;8BACtC,8OAAC,qIAAM;oBAAC,OAAO;8BACb,cAAA,8OAAC;wBAAE,MAAK;kCAAa;;;;;;;;;;;;;;;;;IAI7B;IAEA,MAAM,YAAY;IAyBlB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAK/C,8OAAC,iIAAI;;kCACH,8OAAC,uIAAU;kCACT,cAAA,8OAAC,sIAAS;4BAAC,WAAU;;8CACnB,8OAAC,mIAAK;oCAAC,SAAQ;8CAAa,MAAM,UAAU;;;;;;8CAC5C,8OAAC;oCAAK,WAAU;8CACb,MAAM,OAAO,IAAI;;;;;;;;;;;;;;;;;kCAIxB,8OAAC,wIAAW;wBAAC,WAAU;;4BACpB,MAAM,aAAa,IAAI,MAAM,SAAS,iBACrC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,KAAK,MAAM,aAAa,IAAI,MAAM,SAAS,IAAI;oCAC/C,KAAK,MAAM,OAAO,IAAI;oCACtB,WAAU;oCACV,SAAQ;;;;;;;;;;uCAGV;0CACJ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;4CAAE;0DACS,8OAAC;gDAAK,WAAU;0DAAa,MAAM,EAAE;;;;;;;;;;;;oCAEhD,MAAM,SAAS,iBACd,8OAAC,qIAAM;wCAAC,SAAQ;wCAAO,WAAU;wCAAO,OAAO;kDAC7C,cAAA,8OAAC;4CACC,MAAM,MAAM,SAAS;4CACrB,QAAO;4CACP,KAAI;sDACL;;;;;;;;;;+CAID;;;;;;;;;;;;;;;;;;;0BAKV,8OAAC,oKAAgB;gBACf,eAAe,iLAA6B;gBAC5C,UAAU;gBACV,aAAY;;;;;;;;;;;;AAIpB"}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///Users/murakamimaxi/Desktop/%E3%82%B3%E3%83%BC%E3%83%88%E3%82%99/sns_analyst/.next-internal/server/app/videos/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_0 as '607b0530c99951f4f0ad1f1f9a8d376653db90e294'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}